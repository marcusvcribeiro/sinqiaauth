<app-drawer-content>
  <form [formGroup]="formData">
    <div style="margin: -16px">
      <div class="alb-divisor" style="padding: 8px;" >
        <div class="width-50">
          <alb-input [placeholder]="'campo.usrApi' | t" formControlName="clientId" [maxLength]="22" pattern="^[a-zA-Z0-9.]*"></alb-input>
        </div>
        <div style="padding-top: 8px;"  class="width-20">
          <button alb-button type="primary" (click)="inserir()" [disabled]="formData?.invalid">
            {{ "botao.inserir" | t }}
          </button>
        </div>
        <div class="width-100">
          <div class="error" *ngIf="formData?.controls.clientId.errors?.pattern">
            {{'mensagem.caracterinvalido_clientId' | t}}
          </div>
        </div>
      </div>
    </div>
  </form>

  <br/>
  <h3>Credenciais</h3>
  <br/>

  <div class="alb-divisor center">
    <div class="width-100">
      <p-table scrollHeight="calc(100vh - 360px)" [value]="credenciais" class="alb-table" rowHover="true" [scrollable]="true">
        <ng-template pTemplate="colgroup">
          <col class="sq-col-md">
          <col class="sq-col-sm">
          <col class="sq-col-sm">
          <col class="sq-col-sm">
          <col class="sq-col-sm">
          <col class="sq-col-sm">
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th id="nome">{{ 'campo.nome' | t}}</th>
            <th id="idDono">{{ 'campo.contatos' | t}}</th>
            <th id="idDono">{{ 'campo.enviar' | t}}</th>
            <th id="idDono">{{ 'campo.novoSecret' | t}}</th>
            <th id="idDono">{{ 'campo.definirEscopos' | t}}</th>
            <th id="idDono"></th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-credencial>
          <tr>
            <td>{{credencial.clientId}}</td>
            <td>
              <button alb-button type="secondary" class="divisor-button" style="min-height:24px" (click)="openContatos(credencial)">
                {{'botao.contatos' | t}}
              </button>
            </td>
            <td>
              <button alb-button type="secondary" class="divisor-button" style="min-height:24px" (click)="enviarEmail(credencial)">
                {{'botao.enviar' | t}}
              </button>
            </td>
            <td>
              <button alb-button type="secondary" class="divisor-button" style="min-height:24px" (click)="novoSecret(credencial)">
              {{'botao.novoSecret' | t}}
            </button>
            </td>
            <td>
              <button alb-button type="secondary" class="divisor-button" style="min-height:24px" (click)="openEscopos(credencial)"
              *segFuncao="seg.ONB_CONFIGURAR_ESCOPO" [track]="seg.ONB_CONFIGURAR_ESCOPO">
              {{'botao.escoposAPIPIX' | t}}
            </button>
            </td>
            <td>
               <button alb-button-icon icon="delete" (click)="remover(credencial)" type="button" pure></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</app-drawer-content>
